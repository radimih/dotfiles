---
- name: Block to set become=true on all role tasks
  become: true
  block:
    - name: Install apt key for repository of '{{ package_name }}' package
      ansible.builtin.apt_key:
        url: '{{ key_url }}'
        state: present
        validate_certs: no

    - name: Install repository of '{{ package_name }}' package
      ansible.builtin.apt_repository:
        repo: deb [arch=amd64] {{ repo_url }} {{ ansible_distribution_release }} {{ repo_component }}
        state: present

    - name: Install '{{ package_name }}' package
      ansible.builtin.apt:
        name: '{{ package_name }}'
        state: latest
        update_cache: true
        cache_valid_time: 7200  # apt update если кэш не обновлялся более 2 часов
