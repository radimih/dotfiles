# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# #  Managed by Ansible                                                     # #
# #  DO NOT EDIT THIS FILE MANUALLY                                         # #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #

# From official installation script:
# https://raw.githubusercontent.com/z-shell/zi-src/main/lib/sh/install.sh

source "{{ _zi_home_dir }}/{{ _zi_bin_dirname }}/zi.zsh"
autoload -Uz _zi
(( ${+_comps} )) && _comps[zi]=_zi

# From plugins Ansible variable:

{% for plugin in plugins -%}
    {% if "ices" in plugin -%}
        zinit ice
        {%- for ice in plugin.ices %}
            {{- ' ' }}
            {%- if ice is mapping %}
                {%- if "value" in ice -%}
                    {{ ice.name }}='{{ ice.value }}'
                {%- else -%}
                    {{ ice.name }}
                {%- endif -%}
            {%- else -%}
                {{ ice }}
            {%- endif -%}
            {%- if loop.last %}
                {{- '\n    ' -}}
            {% endif -%}
        {% endfor -%}
    {% endif -%}
    zi {{ plugin.type }} {{ plugin.name }}
{% endfor %}
